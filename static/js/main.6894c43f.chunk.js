(this.webpackJsonpposteat=this.webpackJsonpposteat||[]).push([[0],{33:function(e,t,n){e.exports=n(50)},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),i=n(4),u=n(21),s=n(24),l=n(5),m=n.n(l),p=n(12),d=n(22),g=n(1),f=n(53),b=n(17),E=n.n(b);n(43),n(45),n(51);E.a.initializeApp({apiKey:"AIzaSyCVyQKVyLh7yo3-szC3n_PSr2I0kSbY1us",authDomain:"posteat-d658b.firebaseapp.com",databaseURL:"https://posteat-d658b.firebaseio.com",projectId:"posteat-d658b",storageBucket:"posteat-d658b.appspot.com",messagingSenderId:"1056443819818",appId:"1:1056443819818:web:00adb92039c09aaa69a053"});var h=E.a.auth(),v=E.a.firestore(),O=E.a.storage(),P={checkUserState:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{isLoggedIn:Object(g.a)(Object(g.a)({},e.isLoggedIn),{},{userEmail:n.email,userUid:n.uid,userDisplayName:n.displayName,userPhotoUrl:n.photoURL})})},changeLoginField:function(e,t){var n=t.payload,a=n.name,r=n.value;return Object(g.a)(Object(g.a)({},e),{},{loginFields:Object(g.a)(Object(g.a)({},e.loginFields),{},Object(d.a)({},a,r))})},logoutUserId:function(e){return Object(g.a)(Object(g.a)({},e),{},{isLoggedIn:""})},showAuthError:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{LoginErrorMessage:n})},setPostsToService:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{posts:n})},changeNewPostText:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{newPostText:n})},attachNewPostImage:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{newPostImage:n})},attachNewPostImageUrl:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{newPostImageUrl:n})},editPost:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{editPostText:n})},resetEditPost:function(e){return Object(g.a)(Object(g.a)({},e),{},{editPostText:""})},editProfileDisplayName:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{isLoggedIn:Object(g.a)(Object(g.a)({},e.isLoggedIn),{},{userDisplayName:n})})},editProfileInformation:function(e,t){var n=t.payload;return Object(g.a)(Object(g.a)({},e),{},{isLoggedIn:Object(g.a)(Object(g.a)({},e.isLoggedIn),{},{userDisplayName:n.userDisplayName,userPhotoUrl:n.userPhotoUrl})})}},w=Object(s.b)({name:"application",initialState:{loginFields:{email:"",password:""},LoginErrorMessage:"",isLoggedIn:{userEmail:"",userUid:"",userDisplayName:"",userPhotoUrl:""},posts:[],newPostText:"",newPostImage:"",newPostImageUrl:"",editPostText:"",basicProfileUrl:""},reducers:P}),j=w.actions,I=w.reducer,x=j.checkUserState,y=j.changeLoginField,T=j.logoutUserId,U=j.showAuthError,L=j.changeNewPostText,C=j.setPostsToService,k=j.editPost,S=j.resetEditPost,F=j.attachNewPostImage,N=j.attachNewPostImageUrl,D=j.editProfileDisplayName;j.editProfileInformation;var A=I,_=Object(s.a)({reducer:A}),R=n(3),M=n(23);function G(e){var t=e.isLoggedIn,n=e.onChange,a=e.editState,o=e.onEdit,c=e.onSave,i=e.onClick,u=t.userEmail,s=t.userDisplayName,l=t.userPhotoUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,u),s,r.a.createElement("h5",null,s?r.a.createElement(r.a.Fragment,null,s):r.a.createElement(r.a.Fragment,null," Hey, No Name ")),l?r.a.createElement("img",{src:l,width:"100px",height:"100px"}):r.a.createElement("img",{width:"100px",height:"100px"}),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:s,onChange:function(e){var t=e.target.value;n(t)}}),r.a.createElement("button",{type:"button",onClick:c},"\uc218\uc815")),r.a.createElement("button",{type:"button",onClick:o},"EDIT"),r.a.createElement("button",{type:"button",onClick:i},"LOGOUT"))}function z(){var e=Object(a.useState)(!1),t=Object(M.a)(e,2),n=t[0],o=t[1],c=Object(i.c)((function(e){return{isLoggedIn:e.isLoggedIn}})).isLoggedIn,u=Object(R.f)(),s=Object(i.b)();function l(){o((function(e){return!e}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{isLoggedIn:c,onChange:function(e){s(D(e))},editState:n,onEdit:l,onSave:function(){l(),s(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n(),r=a.isLoggedIn.userDisplayName,h.onAuthStateChanged(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateProfile({displayName:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onClick:function(){h.signOut(),s(T()),u.push("/")}}))}function W(e){var t=e.newPostText,n=e.onChange,a=e.newPostImage,o=e.onAttach,c=e.onSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",name:"newPostText",value:t,onChange:function(e){var t=e.target.value;n(t)},placeholder:"Hello? World!",maxLength:120}),r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:a,width:"100px",height:"100px"}),r.a.createElement("button",{type:"button",onClick:function(){return o("")}},"clear"))),r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=e.currentTarget.result;o(t)},n.readAsDataURL(t)}}),r.a.createElement("button",{type:"button",onClick:c},"POST EAT!"))}function X(){var e=Object(i.c)((function(e){return{newPostText:e.newPostText,newPostImage:e.newPostImage}})),t=e.newPostText,n=e.newPostImage,a=Object(i.b)();return r.a.createElement(W,{newPostText:t,onChange:function(e){a(L(e))},newPostImage:n,onAttach:function(e){a(F(e)),e&&a(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,o,c,i,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.isLoggedIn.userUid,o=a.newPostImage,c=O.ref().child("".concat(r,"/").concat(Object(f.a)())),e.next=4,c.putString(o,"data_url");case 4:return i=e.sent,e.next=7,i.ref.getDownloadURL();case 7:u=e.sent,t(N(u));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onSubmit:function(){a(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.newPostText,o=a.isLoggedIn.userUid,c=a.newPostImageUrl,e.next=3,v.collection("PostEat").add({POST_TEXT:r,POST_IMAGE_URL:c,CREATE_DATE:Date.now(),CREATE_UID:o});case 3:t(L(""));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}})}function B(e){var t=e.postId,n=e.postText,a=e.postImageUrl,o=e.checkId,c=e.onClick,i=e.editState,u=e.onEdit,s=e.editPostText,l=e.onChange,m=e.onUpdate;function p(e,t){window.confirm("Do you want to delete this posteat?")&&c(e,t)}function d(e){var t=e.target.value;l(t)}function g(){return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:function(){return p(t,a)}},"Delete"),r.a.createElement("button",{type:"button",onClick:u},"Edit")))}return r.a.createElement("div",null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:s,onChange:d}),r.a.createElement("button",{type:"button",onClick:u},"\ucde8\uc18c"),r.a.createElement("button",{type:"button",onClick:function(){return m(t)}},"\uc218\uc815"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:a,width:"150px",height:"150px"}),n,g())))}function H(e){var t=e.postId,n=e.createUid,o=e.postText,c=e.postImageUrl,u=Object(a.useState)(!1),s=Object(M.a)(u,2),l=s[0],d=s[1],g=Object(i.c)((function(e){return{userUid:e.isLoggedIn.userUid,editPostText:e.editPostText}})),f=g.userUid,b=g.editPostText,E=Object(i.b)();function h(){d((function(e){return!e}))}return r.a.createElement(B,{postId:t,postText:o,postImageUrl:c,checkId:n===f,onClick:function(e,t){var n,a;E((n=e,a=t,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.doc("PostEat/".concat(n)).delete();case 2:return e.next=4,O.refFromURL(a).delete();case 4:t(F(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},editState:l,onEdit:h,editPostText:b,onChange:function(e){E(k(e))},onUpdate:function(e){var t;E((t=e,function(){var e=Object(p.a)(m.a.mark((function e(n,a){var r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a(),o=r.editPostText,e.next=3,v.doc("PostEat/".concat(t)).update({POST_TEXT:o});case 3:n(S());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),h()}})}function J(e){var t=e.posts;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(H,{key:e.POST_ID,postId:e.POST_ID,createUid:e.CREATE_UID,postText:e.POST_TEXT,postImageUrl:e.POST_IMAGE_URL})})))}function K(){var e=Object(i.c)((function(e){return{posts:e.posts}})).posts;return r.a.createElement(J,{posts:e})}function V(){var e=Object(i.b)();return Object(a.useEffect)((function(){e(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("PostEat").onSnapshot((function(e){var n=e.docs.map((function(e){return Object(g.a)({POST_ID:e.id},e.data())}));t(C(n))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null),r.a.createElement(K,null),r.a.createElement(z,null))}function Q(e){var t=e.fields,n=e.onChange,a=e.onClick,o=e.onSubmit,c=e.LoginErrorMessage,i=t.email,u=t.password;function s(e){var t=e.target,a=t.name,r=t.value;n({name:a,value:r})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:"email",type:"text",placeholder:"Email",value:i,onChange:s}),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",value:u,onChange:s})),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:a},"LOGIN"),r.a.createElement("button",{type:"button",onClick:o},"SIGNIN"),c))}function Y(){var e=Object(i.c)((function(e){return{loginFields:e.loginFields,LoginErrorMessage:e.LoginErrorMessage}})),t=e.loginFields,n=e.LoginErrorMessage,a=Object(i.b)();return r.a.createElement(Q,{fields:t,onChange:function(e){var t=e.name,n=e.value;a(y({name:t,value:n}))},onClick:function(){a(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.loginFields,o=r.email,c=r.password,e.prev=1,e.next=4,h.signInWithEmailAndPassword(o,c);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t(U(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}())},onSubmit:function(){a(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.loginFields,o=r.email,c=r.password,e.prev=1,e.next=4,h.createUserWithEmailAndPassword(o,c);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t(U(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}())},LoginErrorMessage:n})}function q(e){var t=e.isLoggedIn;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.c,null,t?r.a.createElement(R.a,{exact:!0,path:"/",component:V}):r.a.createElement(R.a,{exact:!0,path:"/",component:Y})))}function Z(){var e=Object(i.c)((function(e){return{userEmail:e.isLoggedIn.userEmail}})).userEmail,t=Object(i.b)();return Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){var n=e.email,a=e.uid,r=e.displayName,o=e.photoURL;t(x({email:n,uid:a,displayName:r,photoURL:o}))}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{isLoggedIn:e}),r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",null,"\xa9 Post Eat @iamhwang")))}c.a.render(r.a.createElement(i.a,{store:_},r.a.createElement(u.a,{basename:"/project-postEat"},r.a.createElement(Z,null))),document.getElementById("app"))}},[[33,1,2]]]);
//# sourceMappingURL=main.6894c43f.chunk.js.map